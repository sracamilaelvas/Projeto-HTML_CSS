<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard - Tarefas</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    .badge-pendente {
      background-color: #ffc107;
    }
    .badge-concluida {
      background-color: #28a745;
    }
    .card-tarefa {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .card-tarefa.show {
      opacity: 1;
      transform: translateY(0);
    }
    .btn-filter.active {
      background-color: #0d6efd;
      color: white;
    }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
      <a class="navbar-brand" href="#">Dashboard de Tarefas</a>
    </div>
  </nav>

  <!-- Conteúdo principal -->
  <div class="container mt-5">
    <h2 class="mb-4">Lista de Tarefas</h2>

    <!-- Ações: Filtros + Adicionar -->
    <div class="d-flex flex-wrap justify-content-between align-items-center mb-4">
      <!-- Filtros -->
      <div class="btn-group mb-2 mb-md-0" role="group">
        <button class="btn btn-outline-primary btn-filter active" onclick="aplicarFiltro('Todas')">Todas</button>
        <button class="btn btn-outline-primary btn-filter" onclick="aplicarFiltro('Pendente')">Pendentes</button>
        <button class="btn btn-outline-primary btn-filter" onclick="aplicarFiltro('Concluída')">Concluídas</button>
      </div>
      <!-- Botão: Nova Tarefa -->
      <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalTarefa" onclick="abrirModalAdicionar()">+ Nova Tarefa</button>
    </div>

    <!-- Lista de Tarefas -->
    <div class="row g-3" id="listaTarefas">
      <!-- Cards dinâmicos aqui -->
    </div>
  </div>

  <!-- Modal de Adicionar/Editar Tarefa -->
  <div class="modal fade" id="modalTarefa" tabindex="-1" aria-labelledby="modalTarefaLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="formTarefa">
          <div class="modal-header">
            <h5 class="modal-title" id="modalTarefaLabel">Nova Tarefa</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
          </div>
          <div class="modal-body">
            <input type="hidden" id="indiceEdicao" />
            <div class="mb-3">
              <label for="tituloTarefa" class="form-label">Título</label>
              <input type="text" class="form-control" id="tituloTarefa" required />
            </div>
            <div class="mb-3">
              <label for="descricaoTarefa" class="form-label">Descrição</label>
              <textarea class="form-control" id="descricaoTarefa" rows="3" required></textarea>
            </div>
            <div class="mb-3">
              <label for="statusTarefa" class="form-label">Status</label>
              <select class="form-select" id="statusTarefa" required>
                <option value="Pendente">Pendente</option>
                <option value="Concluída">Concluída</option>
              </select>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="submit" class="btn btn-primary">Salvar</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Rodapé -->
  <footer class="bg-light text-center text-muted py-3 mt-5">
    © 2025 Painel de Tarefas
  </footer>

  <!-- Bootstrap JS + Lógica JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const listaTarefas = [];
    let filtroAtual = 'Todas';

    const listaContainer = document.getElementById('listaTarefas');

    function abrirModalAdicionar() {
      document.getElementById('modalTarefaLabel').innerText = 'Nova Tarefa';
      document.getElementById('formTarefa').reset();
      document.getElementById('indiceEdicao').value = '';
    }

    function abrirModalEditar(indice) {
      const tarefa = listaTarefas[indice];
      document.getElementById('modalTarefaLabel').innerText = 'Editar Tarefa';
      document.getElementById('tituloTarefa').value = tarefa.titulo;
      document.getElementById('descricaoTarefa').value = tarefa.descricao;
      document.getElementById('statusTarefa').value = tarefa.status;
      document.getElementById('indiceEdicao').value = indice;
    }

    function concluirTarefa(indice) {
      listaTarefas[indice].status = 'Concluída';
      renderizarTarefas();
    }

    function excluirTarefa(indice) {
      if (confirm('Deseja excluir esta tarefa?')) {
        listaTarefas.splice(indice, 1);
        renderizarTarefas();
      }
    }

    // Salvar tarefa (novo ou editar)
    document.getElementById('formTarefa').addEventListener('submit', function (e) {
      e.preventDefault();
      const titulo = document.getElementById('tituloTarefa').value;
      const descricao = document.getElementById('descricaoTarefa').value;
      const status = document.getElementById('statusTarefa').value;
      const indice = document.getElementById('indiceEdicao').value;

      const novaTarefa = { titulo, descricao, status };

      if (indice === '') {
        listaTarefas.push(novaTarefa);
      } else {
        listaTarefas[indice] = novaTarefa;
      }

      bootstrap.Modal.getInstance(document.getElementById('modalTarefa')).hide();
      renderizarTarefas();
    });

    function aplicarFiltro(filtro) {
      filtroAtual = filtro;

      // Atualizar botão ativo
      document.querySelectorAll('.btn-filter').forEach(btn => {
        btn.classList.remove('active');
        if (btn.textContent === filtro) {
          btn.classList.add('active');
        }
      });

      renderizarTarefas();
    }

    function renderizarTarefas() {
      listaContainer.innerHTML = '';

      const tarefasFiltradas = listaTarefas.filter(tarefa => {
        return filtroAtual === 'Todas' || tarefa.status === filtroAtual;
      });

      tarefasFiltradas.forEach((tarefa, index) => {
        const card = document.createElement('div');
        card.className = 'col-md-4';

        const delay = index * 100; // Para animação em sequência

        card.innerHTML = `
          <div class="card card-tarefa show" style="animation-delay: ${delay}ms;">
            <div class="card-body">
              <h5 class="card-title">${tarefa.titulo}</h5>
              <p class="card-text">${tarefa.descricao}</p>
              <span class="badge ${tarefa.status === 'Concluída' ? 'badge-concluida' : 'badge-pendente'}">${tarefa.status}</span>
              <div class="mt-3 d-flex justify-content-between">
                <button class="btn btn-sm btn-success" onclick="concluirTarefa(${index})" ${tarefa.status === 'Concluída' ? 'disabled' : ''}>Concluir</button>
                <button class="btn btn-sm btn-warning" onclick="abrirModalEditar(${index})" data-bs-toggle="modal" data-bs-target="#modalTarefa">Editar</button>
                <button class="btn btn-sm btn-danger" onclick="excluirTarefa(${index})">Excluir</button>
              </div>
            </div>
          </div>
        `;

        listaContainer.appendChild(card);
      });

      // Aplica animação de fade-in
      const cards = document.querySelectorAll('.card-tarefa');
      cards.forEach((card, i) => {
        setTimeout(() => {
          card.classList.add('show');
        }, i * 100);
      });
    }

    // Exibir tarefas iniciais (teste opcional)
    listaTarefas.push(
      { titulo: 'Estudar HTML', descricao: 'Revisar semântica e estrutura básica.', status: 'Pendente' },
      { titulo: 'Criar layout responsivo', descricao: 'Usar Bootstrap Grid.', status: 'Concluída' },
      { titulo: 'Praticar JavaScript', descricao: 'Eventos e manipulação DOM.', status: 'Pendente' }
    );
    renderizarTarefas();
  </script>
</body>
</html>
